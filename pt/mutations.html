<!DOCTYPE HTML>
<html lang="pt" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Mutações | Índice</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-prism/prism.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
    

        
    
    
    <link rel="next" href="./actions.html" />
    
    
    <link rel="prev" href="./state.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="4.2"
        data-chapter-title="Mutações"
        data-filepath="mutations.md"
        data-basepath="."
        data-revision="Sat Jul 30 2016 17:55:22 GMT-0400 (EDT)"
        data-innerlanguage="pt">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introdução
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="intro.html">
            
                
                    <a href="./intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        O que é o Vuex?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="getting-started.html">
            
                
                    <a href="./getting-started.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Primeiros Passos
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="tutorial.html">
            
                
                    <a href="./tutorial.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Tutorial
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Principais Conceitos</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="state.html">
            
                
                    <a href="./state.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Estado e Getters
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="4.2" data-path="mutations.html">
            
                
                    <a href="./mutations.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Mutações
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="actions.html">
            
                
                    <a href="./actions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Ações
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="data-flow.html">
            
                
                    <a href="./data-flow.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Fluxo de Dados
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="structure.html">
            
                
                    <a href="./structure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Estrutura da Aplicação
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="middlewares.html">
            
                
                    <a href="./middlewares.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Middlewares
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="strict.html">
            
                
                    <a href="./strict.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Strict Mode
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="forms.html">
            
                
                    <a href="./forms.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Manipulação de Formulários
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="testing.html">
            
                
                    <a href="./testing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Testes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="hot-reload.html">
            
                
                    <a href="./hot-reload.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Hot Reloading
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="api.html">
            
                
                    <a href="./api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Referência da API
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Publicado com GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Índice</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="muta&#xE7;&#xF5;es">Muta&#xE7;&#xF5;es</h1>
<p>Muta&#xE7;&#xF5;es do Vuex s&#xE3;o essenciamente eventos? cada muta&#xE7;&#xE3;o tem um <strong>nome</strong> e um <strong>handler</strong>. A fun&#xE7;&#xE3;o handler ir&#xE1; receber o estado como primeiro par&#xE2;metro:</p>
<pre><code class="lang-js"><span class="token keyword">import</span> Vuex from <span class="token string">&apos;vuex&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    INCREMENT <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// mutate state</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Utilizar apenas letras mai&#xFA;sculas para nomes de muta&#xE7;&#xF5;es &#xE9; apenas uma conven&#xE7;&#xE3;o para fazer com que seja mais f&#xE1;cil diferenci&#xE1;-las de simples fun&#xE7;&#xF5;es.</p>
<p>Voc&#xEA; n&#xE3;o pode chamar diretamente um handler de muta&#xE7;&#xE3;o. As op&#xE7;&#xF5;es aqui s&#xE3;o mais parecidas com um registro de um evento: &quot;Quando um evento <code>INCREMENT</code> &#xE9; disparado, chame esse handler&quot;. Para invocar um handler de uma muta&#xE7;&#xE3;o, voc&#xEA; precisa disparar um evento de muta&#xE7;&#xE3;o:</p>
<pre><code class="lang-js">store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&apos;INCREMENT&apos;</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="disparando-eventos-com-argumentos">Disparando Eventos com Argumentos</h3>
<p>Tamb&#xE9;m &#xE9; poss&#xED;vel passar par&#xE2;metros para o handler:</p>
<pre><code class="lang-js"><span class="token comment" spellcheck="true">// ...</span>
mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  INCREMENT <span class="token punctuation">(</span>state<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>count <span class="token operator">+</span><span class="token operator">=</span> n
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-js">store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&apos;INCREMENT&apos;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre>
<p>Aqui o valor <code>10</code> ser&#xE1; passado para o handler da muta&#xE7;&#xE3;o como o segundo arumento, j&#xE1; que o primeiro sempre ser&#xE1; o <code>state</code>. O mesmo serve para qualquer par&#xE2;metro adicional. Esses par&#xE2;metros s&#xE3;o chamados de <strong>payload</strong>.</p>
<h3 id="disparando-no-estilo-objeto">Disparando no Estilo Objeto</h3>
<blockquote>
<p>necessita do vuex &gt;=0.6.2</p>
</blockquote>
<p>Voc&#xEA; tamb&#xE9;m pode disparar muta&#xE7;&#xF5;es utilizando objetos:</p>
<pre><code class="lang-js">store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&apos;INCREMENT&apos;</span><span class="token punctuation">,</span>
  payload<span class="token punctuation">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Note que ao utilizar o estilo objeto, voc&#xEA; deve incluir todos os argumentos como propriedades no objeto despachado. O objeto inteiro ser&#xE1; passado como o segundo par&#xE2;metro para os handlers das muta&#xE7;&#xF5;es:</p>
<pre><code class="lang-js">mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  INCREMENT <span class="token punctuation">(</span>state<span class="token punctuation">,</span> mutation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>count <span class="token operator">+</span><span class="token operator">=</span> mutation<span class="token punctuation">.</span>payload
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="muta&#xE7;&#xF5;es-seguem-as-regras-de-reatividade-do-vuejs">Muta&#xE7;&#xF5;es seguem as regras de Reatividade do Vue.js</h3>
<p>Como um armaz&#xE9;m de estado Vuex &#xE9; feito reativo pelo Vue, quando n&#xF3;s mudamos o estado, os compoentes Vue que est&#xE3;o observando-o ir&#xE3;o atualizar automaticamente. Isso tamb&#xE9;m significa que as muta&#xE7;&#xF5;es do Vuex est&#xE3;o subjetivas para as mesmas regras e ressalvas de quando utilizamos apenas o Vue.js
Since a Vuex store&apos;s state is made reactive by Vue, when we mutate the state, Vue components observing the state will update automatically. This also means Vuex mutations are subject to the same reactivity caveats when working with plain Vue:</p>
<ol>
<li><p>Prefira inicializar o estado inicial do seu armaz&#xE9;m com todos os campos definidos previamente.</p>
</li>
<li><p>Ao adicionar novas propriedades para um objeto, voc&#xEA; deve seguir uma das duas op&#xE7;&#xF5;es abaixo:</p>
<ul>
<li><p>Utilize <code>Vue.set(obj, &apos;newProp&apos;, 123)</code>, ou -</p>
</li>
<li><p>Substitua o objeto antigo por um novo. Por exemplo, utilizando o stage-2 <a href="https://github.com/sebmarkbage/ecmascript-rest-spread" target="_blank">object spread syntax</a> n&#xF3;s poder&#xED;amos escrever assim:</p>
</li>
</ul>
<pre><code class="lang-js">state<span class="token punctuation">.</span>obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>obj<span class="token punctuation">,</span> newProp<span class="token punctuation">:</span> <span class="token number">123</span> <span class="token punctuation">}</span>
</code></pre>
</li>
</ol>
<h3 id="utilizando-constantes-para-nomes-de-muta&#xE7;&#xF5;es">Utilizando Constantes para nomes de Muta&#xE7;&#xF5;es</h3>
<p>Tamb&#xE9;m &#xE9; uma pr&#xE1;tica comum utilizar constantes para os nomes das muta&#xE7;&#xF5;es - elas ir&#xE3;o permitir que o c&#xF3;digo tome vantagens de ferramentas como linters, e colocar todas as constantes em um &#xFA;nico arquivo permite que seus colaboradores possam ter uma visualiza&#xE7;&#xE3;o geral de todas as muta&#xE7;&#xF5;es que s&#xE3;o poss&#xED;veis em sua aplica&#xE7;&#xE3;o:</p>
<pre><code class="lang-js"><span class="token comment" spellcheck="true">// mutation-types.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> SOME_MUTATION <span class="token operator">=</span> <span class="token string">&apos;SOME_MUTATION&apos;</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment" spellcheck="true">// store.js</span>
<span class="token keyword">import</span> Vuex from <span class="token string">&apos;vuex&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SOME_MUTATION <span class="token punctuation">}</span> from <span class="token string">&apos;./mutation-types&apos;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// we can use the ES2015 computed property name feature</span>
    <span class="token comment" spellcheck="true">// to use a constant as the function name</span>
    <span class="token punctuation">[</span>SOME_MUTATION<span class="token punctuation">]</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// mutate state</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Whether to use constants is largely a preference - it can be helpful in large projects with many developers, but it&apos;s totally optional if you don&apos;t like them.</p>
<h3 id="muta&#xE7;&#xF5;es-precisam-ser-s&#xED;ncronas">Muta&#xE7;&#xF5;es Precisam ser S&#xED;ncronas</h3>
<p>Uma regra importante para se lembrar &#xE9; que <strong>o handler de uma muta&#xE7;&#xE3;o sempre deve ser s&#xED;ncrono</strong>. Por que? Considere o exemplo a seguir:</p>
<pre><code class="lang-js">mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  SOME_MUTATION <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    api<span class="token punctuation">.</span><span class="token function">callAsyncMethod</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Agora imagine que n&#xF3;s estamos debugando o app e olhando nosso log de muta&#xE7;&#xF5;es. Para todas as muta&#xE7;&#xF5;es que est&#xE3;o no log, n&#xF3;s queremos compar&#xE1;-las com <i>snapshots</i> do estado <em>antes</em> e <em>depois</em> da muta&#xE7;&#xE3;o. Entretanto, os callbacks ass&#xED;ncronos dentro do exemplo de muta&#xE7;&#xE3;o acima faz com que isso seja imposs&#xED;vel: o callback n&#xE3;o &#xE9; chamado quando a muta&#xE7;&#xE3;o &#xE9; disparada, e n&#xF3;s n&#xE3;o sabemos quando o callback ser&#xE1; chamado de verdade. Qualquer muta&#xE7;&#xE3;o no estado que for realizada no callback &#xE9; essencialmente irrastre&#xE1;vel!</p>
<h3 id="a&#xE7;&#xF5;es">A&#xE7;&#xF5;es</h3>
<p>Assincronidade combinada com muta&#xE7;&#xF5;es do estado podem fazer nossa aplica&#xE7;&#xE3;o ser de dif&#xED;cil compreens&#xE3;o. Por exemplo, quando voc&#xEA; chama dois m&#xE9;todos, e ambos possuem callbacks ass&#xED;ncronos para modificar o estado, como voc&#xEA; sabe qual m&#xE9;todo foi chamado e qual callback foi executado primeiro? &#xC9; por isso que n&#xF3;s separamos os dois conceitos. Com o Vuex, n&#xF3;s realizamos todas as muta&#xE7;&#xF5;es no estado de forma s&#xED;ncrona. N&#xF3;s iremos realizar qualquer a&#xE7;&#xE3;o ass&#xED;ncrona dentro de <a href="actions.html">A&#xE7;&#xF5;es</a>.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./state.html" class="navigation navigation-prev " aria-label="Previous page: Estado e Getters"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./actions.html" class="navigation navigation-next " aria-label="Next page: Ações"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-github/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/vuejs/vuex/tree/master/docs","label":"Edit This Page"},"github":{"url":"https://github.com/vuejs/vuex/"},"prism":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
