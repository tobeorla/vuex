<!DOCTYPE HTML>
<html lang="es" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Estado y Obtenedores | Tabla de contenidos</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-prism/prism.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
    

        
    
    
    <link rel="next" href="./mutations.html" />
    
    
    <link rel="prev" href="./tutorial.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="4.1"
        data-chapter-title="Estado y Obtenedores"
        data-filepath="state.md"
        data-basepath="."
        data-revision="Sat Jul 30 2016 17:55:23 GMT-0400 (EDT)"
        data-innerlanguage="es">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introducción
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="intro.html">
            
                
                    <a href="./intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Qué es Vuex?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="getting-started.html">
            
                
                    <a href="./getting-started.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Empezando
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="tutorial.html">
            
                
                    <a href="./tutorial.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Tutorial
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Conceptos Básicos</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="4.1" data-path="state.html">
            
                
                    <a href="./state.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Estado y Obtenedores
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="mutations.html">
            
                
                    <a href="./mutations.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Mutaciones
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="actions.html">
            
                
                    <a href="./actions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Acciones
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="data-flow.html">
            
                
                    <a href="./data-flow.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Flujo de datos
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="structure.html">
            
                
                    <a href="./structure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Estructura de la Aplicación
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="middlewares.html">
            
                
                    <a href="./middlewares.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Middlewares
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="strict.html">
            
                
                    <a href="./strict.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Modo estricto
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="forms.html">
            
                
                    <a href="./forms.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Manejo de formularios
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="testing.html">
            
                
                    <a href="./testing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Probando
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="hot-reload.html">
            
                
                    <a href="./hot-reload.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Recarga en caliente
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="api.html">
            
                
                    <a href="./api.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Referencia API
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Publicado con GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Tabla de contenidos</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="estado-y-obtenedores">Estado y obtenedores</h1>
<h3 id="&#xE1;rbol-de-&#xFA;nico-estado">&#xC1;rbol de &#xFA;nico estado</h3>
<p>Vuex utiliza un <strong>&#xE1;rbol de &#xFA;nico estado</strong> - es decir, este &#xFA;nico objeto contiene todo el estado a nivel de aplicaci&#xF3;n y sirve como la &quot;&#xFA;nica fuente de la verdad&quot;. Esto tambi&#xE9;n significa que por lo general vas a tener s&#xF3;lo un almac&#xE9;n para cada aplicaci&#xF3;n. Un &#xE1;rbol de &#xFA;nico estado hace que sea f&#xE1;cil de localizar una parte espec&#xED;fica del estado, y nos permite tomar f&#xE1;cilmente instant&#xE1;neas del estado actual de la aplicaci&#xF3;n para fines de depuraci&#xF3;n.</p>
<p>The single state tree does not conflict with modularity - in later chapters we will discuss how to split your state and mutations into sub modules.</p>
<h3 id="obteniendo-el-estado-vuex-en-componentes-vue">Obteniendo el estado Vuex en componentes Vue</h3>
<p>Entonces, &#xBF;c&#xF3;mo mostrar el estado del almac&#xE9;n en nuestros componentes Vue? Ya que los almacenes Vuex son reactivos, la forma m&#xE1;s sencilla de &quot;recuperar&quot; un estado del mismo es simplemente devolviendo un estado desde una <a href="http://vuejs.org/guide/computed.html" target="_blank">propiedad computarizada</a>:</p>
<pre><code class="lang-js"><span class="token comment" spellcheck="true">// en la definici&#xF3;n del componente Vue</span>
computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Siempre que <code>store.state.count</code> cambie, har&#xE1; que la propiedad computarizada sea reevaluada, y active las actualizaciones de DOM asociadas.</p>
<p>Sin embargo, este modelo implica que el componente dependa de un almac&#xE9;n global. Eso hace que sea m&#xE1;s dif&#xED;cil testear el componente, y tambi&#xE9;n que sea dif&#xED;cil ejecutar varias instancias de la aplicaci&#xF3;n utilizando el mismo conjunto de componentes. En aplicaciones de gran tama&#xF1;o, es posible que queramos &quot;inyectar&quot; el almac&#xE9;n en componentes hijos desde el componente ra&#xED;z. He aqu&#xED; c&#xF3;mo hacerlo:</p>
<ol>
<li><p>Instala Vuex y conecta tu componente ra&#xED;z al almac&#xE9;n:</p>
<pre><code class="lang-js"><span class="token keyword">import</span> Vue from <span class="token string">&apos;vue&apos;</span>
<span class="token keyword">import</span> Vuex from <span class="token string">&apos;vuex&apos;</span>
<span class="token keyword">import</span> store from <span class="token string">&apos;./store&apos;</span>
<span class="token keyword">import</span> MyComponent from <span class="token string">&apos;./MyComponent&apos;</span>

<span class="token comment" spellcheck="true">// importante, ense&#xF1;a al componente Vue</span>
<span class="token comment" spellcheck="true">// c&#xF3;mo manejar opciones relacionadas con Vuex</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 el<span class="token punctuation">:</span> <span class="token string">&apos;#app&apos;</span><span class="token punctuation">,</span>
 <span class="token comment" spellcheck="true">// proporciona el almac&#xE9;n utilizando la opci&#xF3;n &quot;store&quot;.</span>
 <span class="token comment" spellcheck="true">// esto inyectar&#xE1; la instancia del almac&#xE9;n a todos los componentes hijos.</span>
 store<span class="token punctuation">,</span>
 components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   MyComponent
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Al proveer la opci&#xF3;n <code>store</code> a la instancia ra&#xED;z, el almac&#xE9;n ser&#xE1; inyectado a todos sus componentes hijos y estar&#xE1; disponible en ellos como <code>this.$store</code>. Sin embargo, es poco probable que vayamos a necesitar referenciarlo.</p>
</li>
<li><p>Dentro de los componentes hijos, recupera el estado con funciones <strong>obtenedor</strong> en la opci&#xF3;n <code>vuex.getters</code>:</p>
<pre><code class="lang-js"><span class="token comment" spellcheck="true">// MyComponent.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 template<span class="token punctuation">:</span> <span class="token string">&apos;...&apos;</span><span class="token punctuation">,</span>
 data <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token comment" spellcheck="true">// aqu&#xED; es donde recuperamos el estado del almac&#xE9;n</span>
 vuex<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   getters<span class="token punctuation">:</span> <span class="token punctuation">{</span>
     <span class="token comment" spellcheck="true">// una funci&#xF3;n obtenedor del almac&#xE9;n, que</span>
     <span class="token comment" spellcheck="true">// asigna `store.state.count` en el componente como `this.count`</span>
     count<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> state<span class="token punctuation">.</span>count
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Nota el bloque de opci&#xF3;n especial <code>vuex</code>. Aqu&#xED; es donde especificamos el estado que el componente va a utilizar del almac&#xE9;n. Para cada nombre de propiedad, especificamos una funci&#xF3;n obtenedor que recibe todo el &#xE1;rbol del almac&#xE9;n como &#xFA;nico argumento, y entonces selecciona y devuelve parte del estado, o un valor computarizado derivado del estado. El resultado devuelto ser&#xE1; establecido en el componente utilizando el nombre de la propiedad, al igual que una propiedad computarizada.</p>
<p>En muchos casos, la funci&#xF3;n &quot;obtenedor&quot; puede ser muy sucinta usando las funciones de direcci&#xF3;n del ES2015:</p>
<pre><code class="lang-js">vuex<span class="token punctuation">:</span> <span class="token punctuation">{</span>
 getters<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   count<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>count
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
</ol>
<h3 id="obtenedores-deben-ser-puros">Obtenedores deben ser puros</h3>
<p>Todos los obtenedores de Vuex deben ser <a href="https://en.wikipedia.org/wiki/Pure_function" target="_blank">funciones puras</a> - las mismas toman todo el &#xE1;rbol del estado, y devuelven alg&#xFA;n valor basado exclusivamente en ese estado. Esto los hace m&#xE1;s testeables, componibles y eficientes. Tambi&#xE9;n significa que <strong>no puedes apoyarte en <code>this</code> dentro de obtenedores</strong>.</p>
<p>Si necesitas acceso a <code>this</code>, por ejemplo para calcular el estado derivado basado en el estado local o los props del componente, es necesario definir propiedades computarizadas, llanas por separado:</p>
<pre><code class="lang-js">vuex<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  getters<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    currentId<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>currentId
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  isCurrent <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentId
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="obtenedores-pueden-devolver-estado-derivado">Obtenedores pueden devolver estado derivado</h3>
<p>Obtenedores de estado Vuex son, en el fondo, propiedades computarizadas, esto significa que puedes apoyarte en ellos para que de manera reactiva (y eficiente) calculen un estado derivado. Por ejemplo, digamos que en el estado tenemos una colecci&#xF3;n <code>messages</code> que contienen todos los mensajes, y un <code>currentThreadID</code> representando el hilo que est&#xE1; siendo visto por el usuario. Lo que queremos mostrar al usuario es una lista filtrada de mensajes que pertenecen al hilo actual:</p>
<pre><code class="lang-js">vuex<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  getters<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filteredMessages<span class="token punctuation">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>message <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> message<span class="token punctuation">.</span>threadID <span class="token operator">===</span> state<span class="token punctuation">.</span>currentThreadID
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Dado que las propiedades computarizadas de Vue.js se almacenan en cach&#xE9; de forma autom&#xE1;tica y s&#xF3;lo reevaluadas cuando una dependencia reactiva cambie, no necesitas preocuparte de que esta funci&#xF3;n sea llamada en cada mutaci&#xF3;n.</p>
<h3 id="compartiendo-obtenedores-a-trav&#xE9;s-de-m&#xFA;ltiples-componentes">Compartiendo obtenedores a trav&#xE9;s de m&#xFA;ltiples componentes</h3>
<p>Como puedes ver, el obtenedor <code>filteredMessages</code> puede ser &#xFA;til dentro de m&#xFA;ltiples componentes. En ese caso, es una buena idea compartir la misma funci&#xF3;n entre ellos:</p>
<pre><code class="lang-js"><span class="token comment" spellcheck="true">// getters.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> filteredMessages <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>message <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> message<span class="token punctuation">.</span>threadID <span class="token operator">===</span> state<span class="token punctuation">.</span>currentThreadID
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment" spellcheck="true">// en un componente...</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> filteredMessages <span class="token punctuation">}</span> from <span class="token string">&apos;./getters&apos;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  vuex<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    getters<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      filteredMessages
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Debido a que los obtenedores son puros, los obtenedores compartidos a trav&#xE9;s de m&#xFA;ltiples componentes se almacenan en cach&#xE9; de manera eficiente: cuando cambian las dependencias, s&#xF3;lo son reevaluados una vez para todos los componentes que los utilizan.</p>
<blockquote>
<p>Referencias Flux: obtenedores Vuex pueden ser aproximadamente comparados con <a href="https://github.com/rackt/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options" target="_blank"><code>mapStateToProps</code></a> en Redux. Sin embargo, debido a que se apoyan en propiedades computarizadas de Vue, son m&#xE1;s eficientes que <code>mapStateToProps</code>, y m&#xE1;s similares a <a href="https://github.com/reactjs/reselect" target="_blank">reselect</a>.</p>
</blockquote>
<h3 id="a-los-componentes-no-se-les-permite-mutar-directamente-el-estado">A los componentes no se les permite mutar directamente el estado</h3>
<p>Es importante recordar que los <strong>componentes nunca deber&#xED;an mutar el estado del almac&#xE9;n Vuex directamente</strong>. Porque queremos que toda mutaci&#xF3;n de estado sea expl&#xED;cita y rastreable, todas las mutaciones de estado del almac&#xE9;n Vuex deben llevarse a cabo dentro de los manipuladores de mutaci&#xF3;n del almac&#xE9;n.</p>
<p>Para ayudar a imponer esta regla, cuando en <a href="strict.html">Modo estricto</a>, si el estado de almac&#xE9;n es mutado fuera de sus manipuladores de mutaci&#xF3;n, Vuex mostrar&#xE1; un error.</p>
<p>Con esta regla en lugar, nuestros componentes Vue ahora tienen mucha menos responsabilidad: est&#xE1;n conectados al estado del almac&#xE9;n Vuex a trav&#xE9;s de obtenedores de s&#xF3;lo lectura, y la &#xFA;nica manera que tienen de afectar el estado es activando de alguna manera <strong>mutaciones</strong> (que veremos m&#xE1;s adelante). A&#xFA;n pueden poseer y operar en su estado local si es necesario, pero ya no ponemos ninguna l&#xF3;gica de data-fetching o mutaci&#xF3;n de estado global dentro de los componentes individuales. Ellos ahora est&#xE1;n centralizados y manejados dentro de archivos relacionados con Vuex, lo que hace grandes aplicaciones m&#xE1;s f&#xE1;ciles de entender y mantener.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./tutorial.html" class="navigation navigation-prev " aria-label="Previous page: Tutorial"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./mutations.html" class="navigation navigation-next " aria-label="Next page: Mutaciones"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-github/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/vuejs/vuex/tree/master/docs","label":"Edit This Page"},"github":{"url":"https://github.com/vuejs/vuex/"},"prism":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
